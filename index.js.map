{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";  \n\n\nconst API_KEY = \"49372428-d1d84138fa434fefe0cc10176\";  \nconst BASE_URL = \"https://pixabay.com/api/\";  \n\nexport async function fetchImages(query, page = 1, limit = 15) {  \n    const params = {  \n        key: API_KEY,  \n        q: query,  \n        image_type: \"photo\",  \n        orientation: \"horizontal\",  \n        safesearch: true,  \n        page: page,\n        per_page: limit\n    };  \n    try {\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n} catch(error) {  \n            console.error(\"Помилка запиту:\", error);  \n            throw error; \n        };  \n    \n}","import SimpleLightbox from \"simplelightbox\";  \nimport \"simplelightbox/dist/simple-lightbox.min.css\";  \n\nconst gallery = document.querySelector(\".gallery\");  \nconst lightbox = new SimpleLightbox(\".gallery a\", {  \n      \n    captionDelay: 250,  \n});  \n\nexport function renderImages(hits) {  \n    const markup = hits  \n        .map(hit => {  \n            return `  \n                <li class=\"gallery-item\">  \n                    <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">  \n                        <img class=\"gallery-image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\"/>  \n                        <ul class=\"content-list\">  \n                            <li class=\"content-item\"><p>Likes</p><p>${hit.likes}</p></li>  \n                            <li class=\"content-item\"><p>Views</p><p>${hit.views}</p></li>  \n                            <li class=\"content-item\"><p>Comments</p><p>${hit.comments}</p></li>  \n                            <li class=\"content-item\"><p>Downloads</p><p>${hit.downloads}</p></li>  \n                        </ul>  \n                    </a>  \n                </li>  \n            `;  \n        })  \n        .join(\"\");  \n\n    gallery.innerHTML = \"\";  \n    gallery.insertAdjacentHTML(\"beforeend\", markup);  \n    lightbox.refresh();   \n}\n\nexport function clearGallery() {  \n    gallery.innerHTML = \"\";  \n}","import { fetchImages } from \"./js/pixabay-api.js\";  \nimport { renderImages, clearGallery } from \"./js/render-functions.js\";  \n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst form = document.querySelector(\".form\");  \nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet query = \"\";\nlet page = 1;\nconst limit = 15;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", onSearchSubmit);\nloadMoreBtn.addEventListener(\"click\", onLoadMoreClick);\n\nasync function onSearchSubmit(event) {\n    event.preventDefault();\n    query = event.target.elements[\"search-text\"].value.trim();\n    \n    if (query === \"\") return;\n    \n    page = 1;\n    clearGallery();\n    loader.classList.remove(\"hidden\");\n    loadMoreBtn.classList.add(\"hidden\");\n\n      try {\n          const data = await fetchImages(query, page, limit);\n          totalHits = data.totalHits;\n        if (data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            });\n            return;\n        }\n        renderImages(data.hits);\n         if (limit * page < totalHits) {\n      loadMoreBtn.classList.remove(\"hidden\");\n    }\n    } catch (error) {\n        console.log(\"Помилка отримання даних:\", error)\n    } finally {\n            \n        loader.classList.add(\"hidden\");\n      form.reset();      \n    }\n}\n\nasync function onLoadMoreClick() {\n    page += 1;\n    loadMoreBtn.classList.add(\"hidden\");\n    loader.classList.remove(\"hidden\");\n    try {          \n        const data = await fetchImages(query, page, limit);\n        renderImages(data.hits);\n        if (limit * page < totalHits) {\n            loadMoreBtn.classList.remove(\"hidden\");\n        } else {\n            //return\n            iziToast.error({\n      position: \"topRight\",\n      message: \"We're sorry, but you've reached the end of search results.\"\n    });\n  }        \n    } catch (error) {\n       console.log(error); \n    } finally {\n       loader.classList.add(\"hidden\"); \n    }\n\n}\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","limit","params","axios","error","gallery","lightbox","SimpleLightbox","renderImages","hits","markup","hit","clearGallery","form","loader","loadMoreBtn","totalHits","onSearchSubmit","onLoadMoreClick","event","data","iziToast"],"mappings":"owBAGA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAQ,GAAI,CAC3D,MAAMC,EAAS,CACX,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CAClB,EACI,GAAI,CAEA,OADiB,MAAME,EAAM,IAAIN,EAAU,CAAE,OAAAK,CAAM,CAAE,GACrC,IACxB,OAAQE,EAAO,CACH,cAAQ,MAAM,kBAAmBA,CAAK,EAChCA,CAElB,CACA,CCrBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,aAAc,CAE9C,aAAc,GAClB,CAAC,EAEM,SAASC,EAAaC,EAAM,CAC/B,MAAMC,EAASD,EACV,IAAIE,GACM;AAAA;AAAA,oDAEiCA,EAAI,aAAa;AAAA,0DACXA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,sEAEtBA,EAAI,KAAK;AAAA,sEACTA,EAAI,KAAK;AAAA,yEACNA,EAAI,QAAQ;AAAA,0EACXA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,aAK9E,EACA,KAAK,EAAE,EAEZN,EAAQ,UAAY,GACpBA,EAAQ,mBAAmB,YAAaK,CAAM,EAC9CJ,EAAS,QAAO,CACpB,CAEO,SAASM,GAAe,CAC3BP,EAAQ,UAAY,EACxB,CC5BA,MAAMQ,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIhB,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAQ,GACd,IAAIe,EAAY,EAEhBH,EAAK,iBAAiB,SAAUI,CAAc,EAC9CF,EAAY,iBAAiB,QAASG,CAAe,EAErD,eAAeD,EAAeE,EAAO,CAIjC,GAHAA,EAAM,eAAc,EACpBpB,EAAQoB,EAAM,OAAO,SAAS,aAAa,EAAE,MAAM,OAE/CpB,IAAU,GAEd,CAAAC,EAAO,EACPY,IACAE,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAY,UAAU,IAAI,QAAQ,EAEhC,GAAI,CACA,MAAMK,EAAO,MAAMtB,EAAYC,EAAOC,EAAMC,CAAK,EAEnD,GADEe,EAAYI,EAAK,UACfA,EAAK,KAAK,SAAW,EAAG,CACxBC,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,UAC1B,CAAa,EACD,MACH,CACDb,EAAaY,EAAK,IAAI,EACjBnB,EAAQD,EAAOgB,GACtBD,EAAY,UAAU,OAAO,QAAQ,CAEtC,OAAQX,EAAO,CACZ,QAAQ,IAAI,2BAA4BA,CAAK,CACrD,QAAc,CAENU,EAAO,UAAU,IAAI,QAAQ,EAC/BD,EAAK,MAAK,CACX,EACL,CAEA,eAAeK,GAAkB,CAC7BlB,GAAQ,EACRe,EAAY,UAAU,IAAI,QAAQ,EAClCD,EAAO,UAAU,OAAO,QAAQ,EAChC,GAAI,CACA,MAAMM,EAAO,MAAMtB,EAAYC,EAAOC,EAAMC,CAAK,EACjDO,EAAaY,EAAK,IAAI,EAClBnB,EAAQD,EAAOgB,EACfD,EAAY,UAAU,OAAO,QAAQ,EAGrCM,EAAS,MAAM,CACrB,SAAU,WACV,QAAS,4DACf,CAAK,CAEA,OAAQjB,EAAO,CACb,QAAQ,IAAIA,CAAK,CACxB,QAAc,CACPU,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEL"}